WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WLeafletMap",(function(e,t,n,a,o,i){t.wtObj&&t.wtObj.map.remove();t.wtObj=this;const s=this;this.map=null;const p={};let m=i,r=[a,o];this.addTileLayer=function(e,t){const n=JSON.parse(t);L.tileLayer(e,n).addTo(s.map)};this.zoom=function(e){m=e;s.map.setZoom(e)};this.panTo=function(e,t){r=[e,t];s.map.panTo([e,t])};this.addPolyline=function(e,t){const n=JSON.parse(t);L.polyline(e,n).addTo(s.map)};this.addCircle=function(e,t){const n=JSON.parse(t);L.circle(e,n).addTo(s.map)};this.addMarker=function(e,t){t.addTo(s.map);p[e]=t};this.removeMarker=function(e){const t=p[e];if(t){s.map.removeLayer(t);delete p[e]}};this.moveMarker=function(e,t){const n=p[e];n&&n.setLatLng(t)};this.wtResize=function(){s.map.invalidateSize()};t.wtEncodeValue=function(){const e=s.map.getCenter(),t=[e.lat,e.lng],n=s.map.getZoom();return JSON.stringify({position:t,zoom:n})};this.init=function(n,a,o){const i=JSON.parse(n);i.center=a;i.zoom=o;s.map=L.map(t,i);const p=parseInt(function(){let e=t.parentNode;for(;e;){if(e.wtPopup)return e.style.zIndex;e=e.parentNode}return 0}(),10);if(p>0){s.map.getPane("tilePane").style.zIndex=p+200;s.map.getPane("overlayPane").style.zIndex=p+400;s.map.getPane("shadowPane").style.zIndex=p+500;s.map.getPane("markerPane").style.zIndex=p+600;s.map.getPane("tooltipPane").style.zIndex=p+650;s.map.getPane("popupPane").style.zIndex=p+700}s.map.on("zoomend",(function(){const n=s.map.getZoom();if(n!==m){e.emit(t,"zoomLevelChanged",n);m=n}}));s.map.on("moveend",(function(){const n=s.map.getCenter();if(n.lat!==r[0]||n.lng!==r[1]){e.emit(t,"panChanged",n.lat,n.lng);r=[n.lat,n.lng]}}))};this.init(n,[a,o],i)}));