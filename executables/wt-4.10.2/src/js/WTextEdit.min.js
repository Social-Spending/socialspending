WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTextEdit",(function(e,t){t.wtObj=this;let i,o,n=0;const s=this,d=e.WT;let r;tinymce.dom.Event.domLoaded||(tinymce.dom.Event.domLoaded=!0);tinyMCE.init({mode:"none"});this.render=function(i,o,n){r=o;t.ed=new tinymce.Editor(t.id,i,tinymce.EditorManager);t.ed.render();n&&(tinymce.EditorManager.majorVersion<4?t.ed.onChange.add((function(){e.emit(t,"change")})):t.ed.on("change",(function(){e.emit(t,"change")})));setTimeout((function(){e.emit(t,"render")}),0)};this.init=function(){const e=d.getElement(t.id+"_ifr");let n,a;if(tinymce.EditorManager.majorVersion<4){const t=e.parentNode.parentNode.parentNode.parentNode;a=t;n=t.parentNode}else{n=e.parentNode.parentNode.parentNode}if(a){a.style.cssText="width:100%;"+r;t.style.height=a.offsetHeight+"px"}n.wtResize=t.wtResize;d.isGecko?setTimeout((function(){s.wtResize(t,i,o,!0)}),100):s.wtResize(t,i,o,!0);e.contentDocument.body.addEventListener("paste",(function(e){const i=e.clipboardData||e.originalEvent.clipboardData;function o(e){return 0===e.indexOf("image/")}if(i&&i.types)for(let n=0,s=i.types.length;n<s;++n){const s=i.types[n];if(o(s)||o(s.type)){const o=i.items[n].getAsFile(),s=new FileReader;s.onload=function(e){t.ed.insertContent('<img src="'+this.result+'"></img>')};s.readAsDataURL(o);d.cancelEvent(e)}}}))};this.wtResize=function(r,a,l,p){if(l<0)return;const c=d.getElement(r.id+"_ifr");if(c){let p,f,h=0;h=d.px(r,"marginTop")+d.px(r,"marginBottom");d.boxSizing(r)||(h+=d.px(r,"borderTopWidth")+d.px(r,"borderBottomWidth")+d.px(r,"paddingTop")+d.px(r,"paddingBottom"));r.style.height=l-h+"px";const y="absolute"!==t.style.position;if(tinymce.EditorManager.majorVersion<4){const e=c.parentNode.parentNode,t=e.parentNode.parentNode;f=t;p=t.parentNode;y||void 0===a||(p.style.width=a-2+"px");for(let i=0,o=t.rows.length;i<o;i++)t.rows[i]!==e&&(l-=t.rows[i].offsetHeight)}else{const e=c.parentNode,t=e.parentNode;p=t.parentNode;y||void 0===a||(p.style.width=a-2+"px");for(let i=0,o=t.childNodes.length;i<o;i++)t.childNodes[i]!==e&&(l-=t.childNodes[i].offsetHeight+1);l-=1}if(l<0){if(n<10){const e=100*Math.pow(2,n);setTimeout((function(){s.wtResize(t,i,o,!0)}),e)}n+=1;return}l+="px";if(y){p.style.position="static";p.style.display="block"}else{p.style.position=r.style.position;p.style.left=r.style.left;p.style.top=r.style.top;!y&&f&&(f.style.width=a+"px");if(f){f.style.height=l+"px";p.style.height=r.style.height}}if(c.style.height!==l){n=0;c.style.height=l;e.layouts2&&e.layouts2.setElementDirty(t)}}else{i=a;o=l}};o=t.offsetHeight;i=t.offsetWidth}));