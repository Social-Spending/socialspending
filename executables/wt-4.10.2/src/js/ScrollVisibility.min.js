WT_DECLARE_WT_MEMBER(3,JavaScriptConstructor,"ScrollVisibility",(function(e){const t=e.WT;function i(e){return"hidden"!==e.style.visibility&&"none"!==e.style.display&&!e.classList.contains("out")&&(!((e=e.parentNode)&&!t.hasTag(e,"BODY"))||i(e))}let n=0;const o={},s=!1;function c(e,n){if(!i(e))return!1;const o=t.widgetPageCoordinates(e),s=o.x-document.body.scrollLeft-document.documentElement.scrollLeft,c=o.y-document.body.scrollTop-document.documentElement.scrollTop,l=t.windowSize(),r=s,d=e.offsetWidth,a=c,u=e.offsetHeight,f=-n,m=l.x+2*n,v=-n,b=l.y+2*n;return r+d>=f&&f+m>=r&&a+u>=v&&v+b>=a}function l(){for(const t of Object.values(o)){const i=c(t.el,t.margin);if(i!==t.visible){t.visible=i;e.emit(t.el,"scrollVisibilityChanged",i)}}}const r=new MutationObserver(l);this.add=function(t){0===n&&function(){r.observe(document,{childList:!0,attributes:!0,subtree:!0,characterData:!0});window.addEventListener("resize",l,!0);window.addEventListener("scroll",l,!0)}();const i=t.el.id,d=i in o;s;const a=c(t.el,t.margin);if(t.visible!==a){t.visible=a;e.emit(t.el,"scrollVisibilityChanged",a)}o[i]=t;s;d||++n};this.remove=function(e){if(0!==n){if(e in o){s;delete o[e];--n}0===n&&function(){r.disconnect();window.removeEventListener("resize",l,{capture:!0});window.removeEventListener("scroll",l,{capture:!0})}()}}}));