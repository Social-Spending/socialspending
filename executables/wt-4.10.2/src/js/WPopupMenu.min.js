WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WPopupMenu",(function(e,t,n){t.wtObj=this;const o=e.WT;let i=null,s=null,u=null;if(o.isIOS){t.addEventListener("touchstart",T);t.addEventListener("touchend",I)}function c(){a(t,null);t.style.display="none";setTimeout((function(){e.emit(t.id,"cancel")}),0)}function r(e,t){e.classList.toggle("active",t)}function d(e){if(e.subMenu)return e.subMenu;{const t=e.lastChild;if(t&&o.hasTag(t,"UL")){e.subMenu=t;t.parentItem=e;t.addEventListener("mousemove",l);v(t);return t}return null}}function a(e,t){function n(e,t){if(e===t)return!0;if(t){const o=t.parentNode.parentItem;return!!o&&n(e,o)}return!1}!function e(o){for(const i of o.childNodes)if(n(i,t)){if(i!==t){const t=d(i);t&&e(t)}}else{r(i,!1);const t=d(i);if(t){t.style.display="none";e(t)}}}(e)}function l(e){let n=o.target(e);for(;n&&!o.hasTag(n,"LI")&&!o.hasTag(n,"UL");)n=n.parentNode;if(o.hasTag(n,"LI")){if(n===s)return;s=n;r(n,!0);const e=d(n);e&&function(e){e.style.display="block";if(e.parentNode===e.parentItem){e.parentNode.removeChild(e);t.parentNode.appendChild(e)}const n=o.px(e,"paddingTop")+o.px(e,"borderTopWidth");o.positionAtWidget(e.id,e.parentItem.id,o.Horizontal,-n);a(e,null);if(o.isIOS){e.removeEventListener("touchstart",T);e.addEventListener("touchstart",T);e.removeEventListener("touchend",I);e.addEventListener("touchend",I)}}(e);a(t,n)}}function f(){clearTimeout(i);n>=0&&(i=setTimeout(c,n))}function m(){clearTimeout(i)}function v(e){e.addEventListener("mouseleave",f);e.addEventListener("mouseenter",m)}function p(){return null!==document.getElementById(t.id)}function h(e){p()&&1!==o.button(e)&&c()}function E(){p()&&c()}function L(e){p()&&27===e.keyCode&&c()}this.setHidden=function(e){if(i){clearTimeout(i);i=null}s=null;if(e){t.style.position="";t.style.display="";t.style.left="";t.style.top="";document.removeEventListener("mousedown",h);!function(){if(o.isIOS){document.removeEventListener("touchstart",y);document.removeEventListener("touchend",g)}else document.removeEventListener("click",E)}();document.removeEventListener("keydown",L)}else{setTimeout((function(){document.addEventListener("mousedown",h);!function(){if(o.isIOS){document.addEventListener("touchstart",y);document.addEventListener("touchend",g)}else document.addEventListener("click",E)}();document.addEventListener("keydown",L)}),0);t.style.display="block"}a(t,null)};this.popupAt=function(e){v(e)};function y(e){const t=e.originalEvent.touches;u=t.length>1?null:{x:t[0].screenX,y:t[0].screenY}}function T(e){e.stopPropagation()}function g(e){if(u){const t=e.originalEvent.changedTouches[0];Math.abs(u.x-t.screenX)<20&&Math.abs(u.y-t.screenY)<20&&E();u=null}}function I(e){e.stopPropagation()}setTimeout((function(){v(t)}),0);t.addEventListener("mousemove",l)}));