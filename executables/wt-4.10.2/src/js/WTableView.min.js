WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTableView",(function(t,e,l,o,i,s,n){e.wtObj=this;const c=this,r=t.WT,d=document.body.classList.contains("Wt-rtl");function a(t){return d?r.isGecko?-t.scrollLeft:t.scrollWidth-t.clientWidth-t.scrollLeft:t.scrollLeft}let f=0,u=0,h=0,p=0,g=0,m=0===o,T=!1,b=!1,y=0,N=0,w=0,v=0;this.onContentsContainerScroll=function(){N=i.scrollLeft=l.scrollLeft;y=s.scrollTop=l.scrollTop;l.clientWidth&&l.clientHeight&&0===g&&(l.scrollTop<h||l.scrollTop>p||l.scrollLeft<f||l.scrollLeft>u)&&t.emit(e,"scrolled",Math.round(a(l)),Math.round(l.scrollTop),Math.round(l.clientWidth),Math.round(l.clientHeight))};l.wtResize=function(l,i,s,n){if(!m){l.scrollTop=o;l.onscroll();m=!0}if(i-w>(u-f)/2||s-v>(p-h)/2){w=i;v=s;const o=l.clientHeight===l.firstChild.offsetHeight?-1:l.clientHeight;t.emit(e,"scrolled",Math.round(a(l)),Math.round(l.scrollTop),Math.round(l.clientWidth),Math.round(o))}};function x(t){let e=0;for(const l of t.parentNode.childNodes){if(l.isEqualNode(t))return e;e++}return-1}function E(t){let e=-1,l=-1,o=!1,i=!1,s=null,c=r.target(t);for(;c&&void 0!==c.classList&&!c.classList.contains("Wt-tv-contents");){if(c.classList.contains("Wt-tv-c")){"true"===c.getAttribute("drop")&&(i=!0);c.classList.contains(n)&&(o=!0);s=c;c=c.parentNode;e=1*c.className.split(" ")[0].substring(7);l=x(s);break}c=c.parentNode}return{columnId:e,rowIdx:l,selected:o,drop:i,el:s}}function L(){return r.pxself(l.firstChild,"lineHeight")}let W,S=null;this.mouseDown=function(l,o){r.capture(null);const i=E(o);if(!o.ctrlKey&&!o.shiftKey){const l={ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,target:o.target,srcElement:o.srcElement,type:o.type,which:o.which,touches:o.touches,changedTouches:o.changedTouches,pageX:o.pageX,pageY:o.pageY,clientX:o.clientX,clientY:o.clientY};S=setTimeout((function(){"true"===e.getAttribute("drag")&&function(t){return t.el.classList.contains(n)}(i)&&t._p_.dragStart(e,l)}),400)}};this.mouseUp=function(){clearTimeout(S)};this.resizeHandleMDown=function(o,n){const d=o.parentNode;let a=-(r.pxself(d,"width")-1),f=1e4;document.body.classList.contains("Wt-rtl")&&([a,f]=[-f,-a]);new r.SizeHandle(r,"h",o.offsetWidth,e.offsetHeight,a,f,"Wt-hsh2",(function(o){!function(o,n){const d=document.body.classList.contains("Wt-rtl");d&&(n=-n);const a=o.className.split(" ")[0],f=1*a.substring(7),u=o.parentNode,h=u.parentNode!==i,p=h?s.firstChild:l.firstChild,g=p.firstChild,m=p.querySelector("."+a),T=r.pxself(o,"width")-1+n;let b=o.nextSibling,y=m.nextSibling;const N=r.pxself(u,"width")+n+"px";u.style.width=p.style.width=g.style.width=N;if(h){s.style.width=N;s.firstChild.style.width=N;l.style.left=N;i.style.left=N}o.style.width=T+1+"px";m.style.width=T+7+"px";t.layouts2.adjust(e.childNodes[0].id,[[1,1]]);for(;b;b=b.nextSibling)if(y){d?y.style.right=r.pxself(y,"right")+n+"px":y.style.left=r.pxself(y,"left")+n+"px";y=y.nextSibling}t.emit(e,"columnResized",f,parseInt(T));c.autoJavaScript()}(d,o)}),o,e,n,-2,-1)};let C=0;this.touchStart=function(t,e){if(e.touches.length>1){clearTimeout(W);W=setTimeout((function(){k(t,e)}),1e3);C=e.touches.length}else{clearTimeout(W);W=setTimeout((function(){k(t,e)}),50);C=1}};function k(l,o){t.emit(e,{name:"itemTouchSelectEvent",eventObject:l,event:o})}this.touchMove=function(t,e){1===e.touches.length&&W&&clearTimeout(W)};this.touchEnd=function(){W&&1!==C&&clearTimeout(W)};this.scrolled=function(t,e,l,o){f=t;u=e;h=l;p=o};this.resetScroll=function(){i.scrollLeft=N;l.scrollLeft=N;l.scrollTop=y;s.scrollTop=y};this.setScrollToPending=function(){g+=1};this.scrollToPx=function(t,e){y=e;N=t;this.resetScroll()};this.scrollTo=function(t,e,o){g>0&&(g-=1);if(-1!==e){const t=l.scrollTop,i=l.clientHeight;0===o&&(t+i<e?o=1:e<t&&(o=2));switch(o){case 1:l.scrollTop=e;break;case 2:l.scrollTop=e-(i-L());break;case 3:l.scrollTop=e-(i-L())/2}l.onscroll()}};this.setItemDropsEnabled=function(t){T=t};this.setRowDropsEnabled=function(t){b=t};function H(t,e,l){if(l){const l=document.createElement("div");l.className="Wt-drop-site-"+e;t.style.position="relative";t.appendChild(l);t.dropVisual=l}else{t.style.position="";t.dropVisual.remove();delete t.dropVisual}}function I(t,e,o){if(-1===t){H(i,"bottom",o);return}if("top"===e&&t>0){t-=1;e="bottom"}const s=l.firstChild.firstChild;for(const l of s.childNodes){H(l.childNodes[t],e,o)}}function M(){const t=l.firstChild.firstChild.firstChild;return t?t.childNodes.length:0}let R=null,D=null;e.handleDragDrop=function(l,o,i,s,n){if(R){R.className=R.classNameOrig;R=null}if(D){I(D.row,D.side,!1);D=null}if("end"===l)return;const c=E(i);if(null!==c.ele)if(!c.selected&&c.drop&&T)if("drop"===l)t.emit(e,{name:"dropEvent",eventObject:o,event:i},c.rowIdx,c.columnId,s,n);else{o.className="Wt-valid-drop";R=c.el;R.classNameOrig=R.className;R.className=R.className+" Wt-drop-site"}else if(!c.selected&&b){if(!c.columnId){c.el=null;c.rowIdx=-1}const r=c.rowIdx,d=c.columnId,a="bottom";if("drop"===l)t.emit(e,{name:"rowDropEvent",eventObject:o,event:i},r,d,s,n,a);else{o.className="Wt-valid-drop";D={row:c.el?r:M()-1,side:a};I(D.row,D.side,!0)}}else o.className=""};this.onkeydown=function(t){const e=t||window.event;if(9===e.keyCode){r.cancelEvent(e);const o=E(e);if(!o.el)return;let i=o.el.parentNode;const s=x(o.el),n=x(i),c=i.parentNode.childNodes.length,d=i.childNodes.length,a=e.shiftKey;let f,u=!1,h=s;for(;;){for(;a?h>=0:h<d;h=a?h-1:h+1){f=h!==s||u?a?c-1:0:a?n-1:n+1;for(;a?f>=0:f<c;f=a?f-1:f+1){if(h===s&&f===n)return;i=i.parentNode.childNodes[f];const p=i.childNodes[h].querySelectorAll("input, select, textarea, button");if(p.length>0){setTimeout((function(){p.forEach((t=>t.dispatchEvent(new Event("focus",{bubbles:!0}))));p.forEach((t=>t.dispatchEvent(new Event("select",{bubbles:!0}))))}),0);return}}}h=a?d-1:0;u=!0}}else if(e.keyCode>=37&&e.keyCode<=40){const g=r.target(e);function l(t){return r.hasTag(t,"INPUT")&&"text"===t.type||r.hasTag(t,"TEXTAREA")}if(r.hasTag(g,"SELECT"))return;const m=E(e);if(!m.el)return;let T=m.el.parentNode,b=x(m.el),y=x(T);const N=T.parentNode.childNodes.length,w=T.childNodes.length;switch(e.keyCode){case 39:if(l(g)){if(r.getSelectionRange(g).start!==g.value.length)return}y++;break;case 38:b--;break;case 37:if(l(g)){if(0!==r.getSelectionRange(g).start)return}y--;break;case 40:b++;break;default:return}r.cancelEvent(e);if(b>-1&&b<w&&y>-1&&y<N){T=T.parentNode.childNodes[y];const v=T.childNodes[b].querySelectorAll("input, select, textarea, button");if(v.length>0){setTimeout((function(){v.forEach((t=>t.dispatchEvent(new Event("focus",{bubbles:!0}))))}),0);return}}}};this.autoJavaScript=function(){if(null===e.parentNode){e=l=i=null;this.autoJavaScript=function(){};return}if(r.isHidden(e))return;if(!r.isIE&&(y!==l.scrollTop||N!==l.scrollLeft)){void 0===N?c&&r.isGecko?i.scrollLeft=l.scrollLeft=N=0:N=l.scrollLeft:i.scrollLeft=l.scrollLeft=N;s.scrollTop=l.scrollTop=y}let o=e.offsetWidth-r.px(e,"borderLeftWidth")-r.px(e,"borderRightWidth");const n=l.offsetWidth-l.clientWidth;o-=s.clientWidth;if(o>200&&o!==l.tw){l.tw=o;l.style.width=o+"px";i.style.width=o-n+"px"}const c=document.body.classList.contains("Wt-rtl");c?i.style.marginLeft=n+"px":i.style.marginRight=n+"px";const d=l.offsetHeight-l.clientHeight,a=s.style;if(a&&a.marginBottom!==d+"px"){a.marginBottom=d+"px";t.layouts2.adjust(e.childNodes[0].id,[[1,0]])}}}));