WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTreeView",(function(t,e,i,s,n,l){e.wtObj=this;const o=i.firstChild,c=s.firstChild,d=this,a=t.WT;let u=!1,r=!1,h=!1;function f(t){let i=-1,s=null,n=!1,o=!1,c=null,d=a.target(t);for(;d&&d!==e;){if(a.hasTag(d,"LI")){-1===i&&(i=0);s=d.id;break}if(d.className&&0===d.className.indexOf("Wt-tv-c")){0===d.className.indexOf("Wt-tv-c")?i=1*d.className.split(" ")[0].substring(7):-1===i&&(i=0);"true"===d.getAttribute("drop")&&(o=!0);c=d}d.classList.contains(l)&&(n=!0);d=d.parentNode}return{columnId:i,nodeId:s,selected:n,drop:o,el:c}}this.click=function(i,s){const n=f(s);-1!==n.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"clicked","","")};this.dblClick=function(i,s){const n=f(s);-1!==n.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"dblclicked","","")};this.mouseDown=function(i,s){a.capture(null);const n=f(s);if(-1!==n.columnId){t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"mousedown","","");"true"===e.getAttribute("drag")&&n.selected&&t._p_.dragStart(e,s)}};this.mouseUp=function(i,s){const n=f(s);-1!==n.columnId&&t.emit(e,{name:"itemEvent",eventObject:i,event:s},n.nodeId+":"+n.columnId,"mouseup","","")};let m=null;function p(i,s,n){const l=f(s);-1!==l.columnId&&t.emit(e,{name:"itemTouchEvent",eventObject:i,event:s},l.nodeId+":"+l.columnId,n)}this.touchStart=function(t,e){if(e.touches.length>1){clearTimeout(m);m=setTimeout((function(){p(t,e,"touchselect")}),1e3)}else{clearTimeout(m);m=setTimeout((function(){p(t,e,"touchselect")}),50)}};this.touchMove=function(t,e){if(1===e.touches.length&&m){clearTimeout(m);m=null}};this.touchEnd=function(t,e){if(m){clearTimeout(m);m=null}};this.rootClick=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","clicked","","")};this.rootDblClick=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","dblclicked","","")};this.rootMouseDown=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","mousedown","","")};this.rootMouseUp=function(i,s){t.emit(e,{name:"itemEvent",eventObject:i,event:s},"","mouseup","","")};this.resizeHandleMDown=function(i,s){const n=i.parentNode.className.split(" ")[0];if(n){const l=a.getCssRule("#"+e.id+" ."+n),o=a.pxself(l,"width"),c=document.body.classList.contains("Wt-rtl");let u=-o,r=1e4;c&&([u,r]=[-r,-u]);new a.SizeHandle(a,"h",i.offsetWidth,e.offsetHeight,u,r,"Wt-hsh2",(function(i){const s=o+(c?-i:i),a=1*n.substring(7);l.style.width=s+"px";d.adjustColumns();t.emit(e,"columnResized",a,parseInt(s))}),i,e,s,-2,-1)}};let v=!1;function w(){if(!v||!u)return;if(a.isHidden(e))return;v=!1;const i=o.firstChild;let s=c.firstChild,l=0,r=0;const h=c.lastChild.className.split(" ")[0],f=a.getCssRule("#"+e.id+" ."+h);n&&(s=s.firstChild);for(const t of s.childNodes)if(t.className){const i=t.className.split(" ")[0],s=a.getCssRule("#"+e.id+" ."+i);if("none"===s.style.display)continue;l+=a.pxself(s,"width")+7}if(!n)if(f.style.width)e.querySelectorAll(`.Wt-headerdiv .${h}`).forEach((function(t){t.style.width=f.style.width}));else{const t=e.scrollWidth-s.offsetWidth-9-15;t>0&&(f.style.width=t+"px")}if("auto"!==f.style.width){r=l+a.pxself(f,"width")+7;if(n){a.getCssRule("#"+e.id+" .Wt-tv-rowc").style.width=l+"px";d.wtResize();t.layouts2&&t.layouts2.adjust();e.changed=!0}else{c.style.width=i.style.width=r+"px";s.style.width=l+"px"}}}this.adjustColumns=function(){if(!v){v=!0;setTimeout(w,0)}};this.setItemDropsEnabled=function(t){r=t};this.setRowDropsEnabled=function(t){h=t};let g=null,y=null;e.handleDragDrop=function(n,l,o,c,d){if(g){g.className=g.classNameOrig;g=null}if(y){!function(t){t.style.position="";t.dropVisual.remove();delete t.dropVisual}(y);y=null}if("end"===n)return;const u=f(o);if(!u.selected&&u.drop&&r&&-1!==u.columnId)if("drop"===n)t.emit(e,{name:"itemEvent",eventObject:l,event:o},u.nodeId+":"+u.columnId,"drop",c,d);else{l.className="Wt-valid-drop";g=u.el;g.classNameOrig=g.className;g.className=g.className+" Wt-drop-site"}else if(!u.selected&&h){let r,h="bottom";if(u.nodeId){r=a.$(u.nodeId);h=a.widgetCoordinates(r,o).y-r.clientHeight/2<=0?"top":"bottom"}else{const t=i.getElementsByClassName("Wt-tv-root");r=1===t.length?t[0].lastChild:s}if("drop"===n)t.emit(e,{name:"rowDropEvent",eventObject:l,event:o},u.nodeId+":"+u.columnId,c,d,h);else{l.className="Wt-valid-drop";!function(t,e){if("top"===e){const i=t.previousSibling;if(i){t=i;e="bottom"}}const i=document.createElement("div");i.className="Wt-drop-site-"+e;t.style.position="relative";t.appendChild(i);t.dropVisual=i;y=t}(r,h)}}else l.className=""};this.wtResize=function(){u=!0;w();let t,l,r=null,h=a.pxself(e,"width");if(0===h)h=e.clientWidth;else if(a.boxSizing(e)){h-=a.px(e,"borderLeftWidth");h-=a.px(e,"borderRightWidth")}let f=i.offsetWidth-i.clientWidth;f>50&&(f=0);i.clientWidth>0&&(h-=f);if(e.classList.contains("column1")){t=e.querySelector(".Wt-headerdiv").lastChild.className.split(" ")[0];l=a.getCssRule("#"+e.id+" ."+t);r=a.pxself(l,"width")}if(h>100&&(h!==i.tw||r!==i.c0w||e.changed)){const u=!e.changed;i.tw=h;i.c0w=r;t=e.querySelector(".Wt-headerdiv").lastChild.className.split(" ")[0];l=a.getCssRule("#"+e.id+" ."+t);const m=o.firstChild,p=a.getCssRule("#"+e.id+" .cwidth"),v=p.style.width===m.offsetWidth+1+"px",w=c.firstChild;p.style.width=h+"px";i.style.width=h+f+"px";if(!document.body.classList.contains("Wt-rtl")){s.style.marginRight=f+"px";document.querySelectorAll(`#${e.id} .Wt-scroll`).forEach((function(t){t.style.marginRight=f+"px"}))}if(null!==r){const t=h-r-7;if(t>0){const i=Math.min(t,a.pxself(a.getCssRule("#"+e.id+" .Wt-tv-rowc"),"width"));h-=t-i;c.style.width=h+"px";m.style.width=h+"px";a.getCssRule("#"+e.id+" .Wt-tv-row").style.width=i+"px"}}else if(v){c.style.width=p.style.width;m.style.width=p.style.width}else c.style.width=m.offsetWidth+"px";!n&&m.offsetWidth-w.offsetWidth>=7&&(l.style.width=m.offsetWidth-w.offsetWidth-7+"px");e.changed=!1;u&&d.adjustColumns()}};this.scrollTo=function(t,e,s,n){if(-1!==e){e*=s;const t=i.scrollTop,l=i.clientHeight;0===n&&(t+l<e?n=1:e<t&&(n=2));switch(n){case 1:i.scrollTop=e;break;case 2:i.scrollTop=e-(l-s);break;case 3:i.scrollTop=e-(l-s)/2}window.fakeEvent={object:i};i.onscroll(window.fakeEvent);window.fakeEvent=null}};let b=0;this.setRowHeight=function(t){b=t};const W=function(){if(0===b)return;const t=i.scrollTop;o.children[0].children[0].style.backgroundPosition="0px "+Math.floor(t/(2*b))*(2*b)+"px"};i.addEventListener?i.addEventListener("scroll",W):i.attachEvent&&i.attachEvent("onscroll",W);d.adjustColumns()}));